*** Settings ***
Library		Selenium2Library
Library		String
Library		Collections	
Variables	Variables/Variables.py
Resource	../Common/Common_Variables.txt
suite setup		open makemytrip


*** Test Cases ***
#search hotels functionality
#	set selenium speed	4 seconds
#	search hotels for destination
#	check Hotels according to destination					

#check popular filters for destination
#	set selenium speed	5 seconds
#	click element		${blank}
#	select filter from "select filter" and check checkbox is clickable or not	${popularFilterSection}		${allFilters[0]}	${popularFiltersList}	${popularFilterNum}		${popularCheckBox}		${popularFilterShowmore}	${popularFilter}	${popularFilterValue}

check price per night filter for destination
#	set selenium speed	5 seconds
#	click element		${blank}
	select price per night and check hotels according to filter		

check locality filters for destination		
#	set selenium speed	5 seconds
#	click element		${blank}	
	select filter from "Select filter" and check checkbox is clickable or not	${localityFilterSection}	${allFilters[1]}	${localityFilterList}	${localityFilterNum}		${localityCheckBox}		${localityFilterShowmore}	${localityFilter}	${localityFilterValue}

check star category filters for destination
#	set selenium speed	5 seconds
#	click element		${blank}	
	select filter from "Select filter" and check checkbox is clickable or not	${starCategorySection}		${allFilters[2]}	${starCategoryFilterList}	${starCategoryFilterNum}		${starCategoryCheckBox}		${starCategoryShowmore}		${starCategoryFilter}		${starCategoryFilterValue}

check property types filters for destination
#	set selenium speed	5 seconds
#	click element		${blank}	
	select filter from "Select filter" and check checkbox is clickable or not	${propertyTypeSection}		${allFilters[4]}	${propertyTypeList}		${propertyTypeFilterNum}		${propertyTypeCheckBox}		${propertyTypeShowmore}		${propertyTypeFilter}		${propertyTypeFilterValue}


check user rating filters for destination
#	set selenium speed	5 seconds
#	click element		${blank}	
	select filter from "Select filter" and check checkbox is clickable or not	${userRatingFilterSection}	${allFilters[3]}	${userRatingList}		${userRatingFilterNum}		${userRatingCheckBox}	${userRatingFilterShowmore}		${userRatingFilter}		${userRatingFilterValue}

#check facility filters for destination
#	set selenium speed	5 seconds
#	click element		${blank}	
#	select filter from "Select filter" and check checkbox is clickable or not	${facilityFilterSection}	${allFilters[5]}	${facilityFilterList}	${facilityFilterNum}		${facilityCheckBox}		${facilityFilterShowmore}	${facilityFilter}		${facilityFilterValue}



*** Keywords ***
open makemytrip
	open browser	${url}		${browser}		remote_url=http://192.168.43.6:4444/wd/hub		desired_capabilities={"browserName":"firefox","platform":"WINDOWS"}
	maximize browser window
	
search hotels for destination
	click element	${loginButton}
	click element	${hotelButton}
	click element	${destiName}
	input text		${enterDesti}	${Destination}
	click element	${selectDesti}
	click element	${checkinDate}
	click element	${checkoutDate}
	click element	${roomGuest}
	${numa}=	convert to string	${adultsnum}
	${Adults}=	replace string	${adults}	NUMA	${numa}
	click element	${Adults}
	${numc}=	convert to string	${childsnum}
	${Childs}=	replace string	${childs}	NUMC	${numc}	
	click element	${childs}
	: FOR	${child_num}	IN RANGE	0	${childsnum}	
	\	${child}=	convert to string	${child_num}
	\	${Child_Age}=	replace string	${childAge}		CHILD		${child}
	\	${age}=		convert to string	${age${child_num}}
	\	${ChildAge_Value}=	replace string	${childAgeValue}	AGE		${age}
	\	${ChildAge_Value}=	replace string	${ChildAge_Value}	CHILD		${child}	
	\	click element	${ChildAge}
	\	click element   ${ChildAgeValue}
	\	${child_num}=	evaluate	${child_num} + 1
	\	${childAge}=	replace string	${childAge}		${child}		CHILD	
	\	${ChildAge_Value}=	replace string	${childAgeValue}	${age}		AGE
	\	${ChildAge_Value}=	replace string	${ChildAge_Value}	${child}	CHILD	

	click element	${apply}
	click element	${travellingReason}
	click element	${travellingForLeisure}
	click element	${serachButton}
	
check Hotels according to destination
#	click element		${blank}
	${countHotels}=		get element count	${hotelsLists}	
	:FOR	${singleHotel}	IN RANGE	2	${countHotels}+2
	\	${row}=		convert to string	${singleHotel}
	\	${Checkdesti}=	replace string		${checkdesti}	ROW		${row}
 	\	element should contain		${Checkdesti}		${Destination}
	\	${singleHotel}=	evaluate	${singleHotel}+1
	\	${checkdesti}=	replace string		${checkdesti}	${row}		ROW

	

select filter from "Select filter" and check checkbox is clickable or not	
	[Arguments]		${FilterSection}	${selectFilterValue}	${FiltersList}		${FilterNum}		${CheckBox}		${FilterShowmore}		${Filters}		${filterValue}
	${showmore}=	run keyword and return status	page should contain element		${FilterShowmore}
	run keyword if		${showmore}==True	click element	${FilterShowmore}
	${totalSection}=	get element count	${FilterSection}
	: FOR	${section}		IN RANGE	1	${totalSection}+1
	\	select filter from section filter	${section}	${selectFilterValue}	${FiltersList}		${FilterNum}		${CheckBox}		${FilterShowmore}		${Filters}		${filterValue}
	
select filter from section filter	
	[Arguments]		${section}	${selectFilterValue}	${FiltersList}		${FilterNum}		${CheckBox}		${FilterShowmore}		${Filters}		${filterValue}
	${sec}=		convert to string	${section}
	${sec_filter}=	replace string	${Filters}		SEC		${sec}
	${totalFilter}=	get element count	${sec_filter}
	: FOR	${filter}		IN RANGE	1	${totalFilter}+1
	\	${num}=		convert to string	${filter}
	\	${check_Box}=	replace string		${CheckBox}		FILTERNUM		${num}
	\	${check_Box}=	replace string		${check_Box}		SEC		${sec}	
	\	log		${FilterNum}
	\	${Filter_Num}=	replace string		${FilterNum}	FILTERNUM		${num}
	\	${Filter_Num}=	replace string		${Filter_Num}	SEC		${sec}
	\	${Filter_Value}=	replace string		${filterValue}		FILTERNUM		${num}
	\	${Filter_Value}=	replace string		${Filter_Value}		SEC		${sec}	
	\	log		${Filter_Num}
	\	log		${Filter_Value}
	\	${value}=	get text	${Filter_Value}
	\	click element	${Filter_Num}	
	\	${status}=	run keyword and return status	element should contain		${applied}		${value}
	\	run keyword if	${status}==True		check hotels according to "${selectFilterValue} filter" for destination		${filter}		${FiltersList}		${Filter_Num}		${value}
	\	${FilterNum}=	replace string		${FilterNum}		${num}		FILTERNUM
	\	${filterValue}=	replace string		${filterValue}		${num}		FILTERNUM	
	\	${CheckBox}=		replace string		${CheckBox}		${num}		FILTERNUM	
	\	${filter}=	evaluate	${filter}+1				


check hotels according to "Popular filter" for destination
	[Arguments]		${filter}		${FiltersList}		${Filter_Num}		${value}
	${countHotels}=		get element count	${hotelsLists}
	:FOR	${singleHotel}	IN RANGE	0	${countHotels}
	\	${row}=		convert to string	${singleHotel}
	\	${Checkdesti}=	replace string		${checkdesti}	ROW		${row}
	
 	\	${status}=		run keyword and return status	element should contain		${Checkdesti}		${FiltersList["${value}"]}
	\	run keyword if		${status}==False	check image of "${value}" popular filter	${row}	${value}	
	\	${singleHotel}=	evaluate	${singleHotel}+1

	\	${checkdesti}=	replace string		${checkdesti}	${row}		ROW
	click element	${appliedFilter}		

check image of "MMT Assured" popular filter	
	[Arguments]		${row}	${value}	
	${MMTAssuredImage}=		replace string		${MMTAssuredImage}	ROW		${row}
	element should be visible		${MMTAssuredImage}
	${MMTAssuredImage}=		replace string		${MMTAssuredImage}	${row}	ROW
	
check image of "MySafety - Safe and Hygienic Stays" popular filter	
	[Arguments]		${row}	${value}	
	${MySafetyImage}=		replace string		${MySafetyImage}	ROW		${row}
	element should be visible		${MySafetyImage}
	${MySafetyImage}=		replace string		${MySafetyImage}	${row}	ROW
	
check hotels according to "Property Types filter" for destination 
	[Arguments]		${filter}		${FiltersList}		${Filter_Num}		${value}
	${valueUpper}=		convert to upper case	${value}
	${countHotels}=		get element count	${hotelsLists}
	:FOR	${singleHotel}	IN RANGE	0	${countHotels}
	\	${row}=		convert to string	${singleHotel}
	\	${Checkdesti}=	replace string		${checkdesti}	ROW		${row}
	\	${banner}=	replace string		${banner}	ROW		${row}
 	\	${status}=		run keyword and return status	element should be visible		${banner}		
	\	run keyword if		${status}==True		element should contain		${Checkdesti}		${valueUpper}	ELSE	log		Hotels
	\	${singleHotel}=	evaluate	${singleHotel}+1
	\	${banner}=	replace string		${banner}	${row}		ROW
	\	${checkdesti}=	replace string		${checkdesti}	${row}		ROW
	click element	${appliedFilter}		

select price per night and check hotels according to filter
	element should be visible	${lastValue}
	Execute Javascript		window.scroll(0,500)
	Drag And Drop By Offset		${lastValue}	-100		0
	Execute Javascript		window.scroll(0,500)
	Drag And Drop By Offset		${initValue}	50		0
	${maxTargetPrice}=		get text	${targetPrice}
	${maxTargetPrice}=		convert to string	${maxTargetPrice}
	log		${maxTargetPrice}
	${maxPrice}=	Strip String		${maxTargetPrice}		characters=INR
	log		${maxPrice}
	${minTargetPrice}=		get text	${startingPrice}
	${minTargetPrice}=		convert to string	${minTargetPrice}
	log		${minTargetPrice}
	${minPrice}=	Strip String		${minTargetPrice}		characters=INR
	log		${minPrice}

	${countHotels}=		get element count	${hotelsLists}
	:FOR	${singleHotel}	IN RANGE	0	${countHotels}
	\	${row}=		convert to string	${singleHotel}
	\	${inrPrice}=	replace string		${inrPrice}		ROW		${row}
	\	${shownInrPrice}=		get text	${inrPrice}
	\	${shownInrPrice}=		convert to string	${shownInrPrice}
	\	log		${shownInrPrice}
	\	${price}=	Strip String		${shownInrPrice}		characters=INR
	\	log		${price}
	\	${Legth}=	Get Length		${price}
	\	${price}=	remove string		${price}	,
	\	log		${price}
	\	should be true		${maxPrice}>=${price}
	\	should be true		${minPrice}<=${price}
	\	${inrPrice}=	replace string		${inrPrice}		${row}	ROW	
	click element	${appliedFilter}
	
	
check hotels according to "Locality filter" for destination 
	[Arguments]		${filter}		${FiltersList}		${Filter_Num}		${value}
	${countHotels}=		get element count	${hotelsLists}
	${countAfterNearBy}=	get element count	${nearByHotels}
	:FOR	${singleHotel}	IN RANGE	0	${countHotels}-${countAfterNearBy}
	\	${row}=		convert to string	${singleHotel}
	\	${Checkdesti}=	replace string		${checkdesti}	ROW		${row}
 	\	element should contain		${Checkdesti}		${FiltersList["${value}"]}	
	\	${singleHotel}=	evaluate	${singleHotel}+1
	\	${checkdesti}=	replace string		${checkdesti}	${row}		ROW
	click element	${appliedFilter}		



check hotels according to "Ficility filter" for destination 
	[Arguments]		${filter}		${FiltersList}		${Filter_Num}		${value}
	${countHotels}=		get element count	${hotelsLists}
	:FOR	${singleHotel}	IN RANGE	0	${countHotels}
	\	${row}=		convert to string	${singleHotel}
	\	${Checkdesti}=	replace string		${checkdesti}	ROW		${row}
	\	click element	${Checkdesti}
	\	click element	${hotelFacilities}
 	\	element should contain		${facilities}		${value}
	\	${singleHotel}=	evaluate	${singleHotel}+1
	\	${checkdesti}=	replace string		${checkdesti}	${row}		ROW
	click element	${appliedFilter}		


#check hotels according to "Ficility filter" for destination 
#	[Arguments]		${filter}		${FiltersList}		${Filter_Num}		${value}
#	${countHotels}=		get element count	${hotelsLists}
#	:FOR	${singleHotel}	IN RANGE	0	${countHotels}
#	\	${row}=		convert to string	${singleHotel}
#	\	${Checkdesti}=	replace string		${checkdesti}	ROW		${row}
#	\	element should contain		${Checkdesti}		${value}
#	\	${singleHotel}=	evaluate	${singleHotel}+1
#	\	${checkdesti}=	replace string		${checkdesti}	${row}		ROW
#	click element	${appliedFilter}		


	
check hotels according to "User Rating filter" for destination	
	[Arguments]		${filter}		${FiltersList}		${Filter_Num}	${value1}
	${countHotels}=		get element count	${hotelsLists}
	:FOR	${singleHotel}	IN RANGE	0	${countHotels}	
	\	${row}=		convert to string	${singleHotel}
	\	${userRating}=	replace string		${userRating}	ROW		${row}	
	\	${value}=	get text	${userRating}
	\	should be true		${value}>=${FiltersList[${filter}-1]}	
	\	${singleHotel}=	evaluate	${singleHotel}+1
	\	${userRating}=	replace string		${userRating}	${row}		ROW
	click element	${appliedFilter}		


check hotels according to "Star Category filter" for destination 
	[Arguments]		${filter}		${FiltersList}		${Filter_Num}		${value}
	${countHotels}=		get element count	${hotelsLists}
	:FOR	${singleHotel}	IN RANGE	0	${countHotels}
	\	${row}=		convert to string	${singleHotel}
	\	${value1}=		convert to string		${value}
	\	${Star}=	replace string		${Stars}	ROW		${row}
	\	${Star}=		replace string		${Star}		STAR	${FiltersList["${value1}"]}
	\	${status}=		run keyword and return status	element should be visible		${Star}		
	\	run keyword if		${status}==True		log		match 
	\	${singleHotel}=	evaluate	${singleHotel}+1
	\	${Stars}=	replace string		${Stars}	${row}		ROW
	\	${Stars}=		replace string		${Stars}	${FiltersList["${value1}"]}		STAR
	click element	${appliedFilter}		







