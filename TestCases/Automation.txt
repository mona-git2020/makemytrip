*** Settings ***
Library		Selenium2Library
Library		String
Library		Collections	
Variables	Variables/Variables.py
Resource	../Common/Common_Variables.txt
suite setup		open makemytrip



*** Test Cases ***
#search hotels functionality
#	set selenium speed	4 seconds
#	search hotels for destination
#	check Hotels according to destination					

#check popular filters for destination
#	set selenium speed	5 seconds
#	click element		${blank}
#	click element		css=#hlistpg_fr_popular_filters .filterList li:nth-child(1)
#	element should contain  	css=#Listing_hotel_1	//imgak.mmtcdn.com/pwa_v3/pwa_hotel_assets/web/mmtAssured.png
#	select filter from "select filter" and check checkbox is clickable or not	${popularFiltersList}	${popularFilterNum}		${popularCheckBox}		${popularFilterShowmore}	${popularFilter}

#check price per night filter for destination
#	set selenium speed	5 seconds
#	click element		${blank}
#	select price per night and check hotels according to filter		

check locality filters for destination		
	set selenium speed	5 seconds
	click element		${blank}	
	select filter from "Select filter" and check checkbox is clickable or not	${allFilters[1]}	${localityFilterList}	${localityFilterNum}		${localityCheckBox}		${localityFilterShowmore}	${localityFilter}	${localityFilterValue}

#check star category filters for destination
#	set selenium speed	5 seconds
#	click element		${blank}	
#	select filter from "Select filter" and check checkbox is clickable or not	${starCategoryFilterList}	${starCategoryFilterNum}		${starCategoryCheckBox}		${starCategoryFilterShowmore}	${starCategoryFilter}

check property types filters for destination
	set selenium speed	5 seconds
	click element		${blank}	
	select filter from "Select filter" and check checkbox is clickable or not	${allFilters[4]}	${propertyTypeList}		${propertyTypeFilterNum}		${propertyTypeCheckBox}		${propertyTypeShowmore}		${propertyTypeFilter}		${propertyTypeFilterValue}

check facility filters for destination
	set selenium speed	5 seconds
	click element		${blank}	
	select filter from "Select filter" and check checkbox is clickable or not	${allFilters[5]}	${facilityFilterList}	${facilityFilterNum}		${facilityCheckBox}		${facilityFilterShowmore}	${facilityFilter}		${facilityFilterValue}

check user rating filters for destination
	set selenium speed	5 seconds
	click element		${blank}	
	select filter from "Select filter" and check checkbox is clickable or not	${allFilters[3]}	${userRatingList}		${userRatingFilterNum}		${userRatingCheckBox}	${userRatingFilterShowmore}		${userRatingFilter}		${userRatingFilterValue}


*** Keywords ***
open makemytrip
	open browser	${url}		${browser}		remote_url=http://192.168.43.6:4444/wd/hub		desired_capabilities={"browserName":"firefox","platform":"WINDOWS"}
	maximize browser window
	
search hotels for destination
	click element	${loginButton}
	click element	${hotelButton}
	click element	${destiName}
	input text		${enterDesti}	${Destination}
	click element	${selectDesti}
	click element	${checkinDate}
	click element	${checkoutDate}
	click element	${roomGuest}
	${numa}=	convert to string	${adultsnum}
	${Adults}=	replace string	${adults}	NUMA	${numa}
	click element	${Adults}
	${numc}=	convert to string	${childsnum}
	${Childs}=	replace string	${childs}	NUMC	${numc}	
	click element	${childs}
	: FOR	${child_num}	IN RANGE	0	${childsnum}	
	\	${child}=	convert to string	${child_num}
	\	${Child_Age}=	replace string	${childAge}		CHILD		${child}
	\	${age}=		convert to string	${age${child_num}}
	\	${ChildAge_Value}=	replace string	${childAgeValue}	AGE		${age}
	\	${ChildAge_Value}=	replace string	${ChildAge_Value}	CHILD		${child}	
	\	click element	${ChildAge}
	\	click element   ${ChildAgeValue}
	\	${child_num}=	evaluate	${child_num} + 1
	\	${childAge}=	replace string	${childAge}		${child}		CHILD	
	\	${ChildAge_Value}=	replace string	${childAgeValue}	${age}		AGE
	\	${ChildAge_Value}=	replace string	${ChildAge_Value}	${child}	CHILD	

	click element	${apply}
	click element	${travellingReason}
	click element	${travellingForLeisure}
	click element	${serachButton}
	
check Hotels according to destination
#	click element		${blank}
	${countHotels}=		get element count	${hotelsLists}	
	:FOR	${singleHotel}	IN RANGE	2	${countHotels}+2
	\	${row}=		convert to string	${singleHotel}
	\	${Checkdesti}=	replace string		${checkdesti}	ROW		${row}
 	\	element should contain		${Checkdesti}		${Destination}
	\	${singleHotel}=	evaluate	${singleHotel}+1
	\	${checkdesti}=	replace string		${checkdesti}	${row}		ROW

select filter from "Select filter" and check checkbox is clickable or not	
	[Arguments]		${selectFilterValue}	${FiltersList}		${FilterNum}		${CheckBox}		${FilterShowmore}		${Filters}		${filterValue}
	${showmore}=	run keyword and return status	page should contain element		${FilterShowmore}
	run keyword if		${showmore}==True	click element	${FilterShowmore}
	${totalFilter}=	get element count	${Filters}
	: FOR	${filter}		IN RANGE	1	${totalFilter}+1
	\	${num}=		convert to string	${filter}
	\	${check_Box}=	replace string		${CheckBox}		FILTERNUM		${num}
	\	log		${FilterNum}
	\	${Filter_Num}=	replace string		${FilterNum}	FILTERNUM		${num}
	\	${Filter_Value}=	replace string		${filterValue}	FILTERNUM		${num}
	\	log		${Filter_Num}
	\	${value}=	get text	${Filter_Value}
	\	click element	${Filter_Num}	
	\	${status}=	run keyword and return status	element should contain		${applied}		${value}
	\	run keyword if	${status}==True		check hotels according to "${selectFilterValue} filter" for destination		${filter}		${FiltersList}		${Filter_Num}		${value}
	\	${FilterNum}=	replace string		${FilterNum}		${num}		FILTERNUM
	\	${filterValue}=	replace string		${filterValue}		${num}		FILTERNUM	
	\	${CheckBox}=		replace string		${CheckBox}		${num}		FILTERNUM	
	\	${filter}=	evaluate	${filter}+1				
	

#select filter from "Property Types Filter" and check checkbox is clickable or not
#	[Arguments]		${FiltersList}	${FilterNum}		${CheckBox}		${FilterShowmore}	${Filters}
#	click element		${FilterShowmore}
#	${totalFilter}=	get element count	${Filters}
#	log		${FilterNum}
#	: FOR	${filter}		IN RANGE	1	${totalFilter}+1
#	\	${num}=		convert to string	${filter}
#	\	${check_Box}=	replace string		${CheckBox}		FILTERNUM		${num}
#	\	log		${FilterNum}
#	\	${Filter_Num}=	replace string		${FilterNum}	FILTERNUM		${num}
#	\	log		${Filter_Num}
#	\	${value}=	get text	${Filter_Num}	
#	\	click element	${Filter_Num}	
#	\	${status}=	run keyword and return status	element should contain		${applied}		${value}
#	\	run keyword if	${status}==True		check hotels according to popular filter for destination	${filter}		${FiltersList}		${Filter_Num}		${value}
#	\	${FilterNum}=	replace string		${FilterNum}		${num}		FILTERNUM
#	\	${CheckBox}=		replace string		${CheckBox}		${num}		FILTERNUM	
#	\	${filter}=	evaluate	${filter}+1				


check hotels according to "Property Types filter" for destination 
	[Arguments]		${filter}		${FiltersList}		${Filter_Num}		${value}
	${valueUpper}=		convert to upper case	${value}
	${countHotels}=		get element count	${hotelsLists}
	:FOR	${singleHotel}	IN RANGE	0	${countHotels}
	\	${row}=		convert to string	${singleHotel}
	\	${Checkdesti}=	replace string		${checkdesti}	ROW		${row}
 	\	${status}=		run keyword and return status	element should contain		${Checkdesti}		${value}
	\	run keyword if		${status}==False	element should contain		${Checkdesti}		${valueUpper}
	\	${singleHotel}=	evaluate	${singleHotel}+1
	\	${checkdesti}=	replace string		${checkdesti}	${row}		ROW
	click element	${appliedFilter}		

select price per night and check hotels according to filter
	drag and drop		${lastValue}	${initValue}

check hotels according to "Locality filter" for destination 
	[Arguments]		${filter}		${FiltersList}		${Filter_Num}		${value}
	${countHotels}=		get element count	${hotelsLists}
	:FOR	${singleHotel}	IN RANGE	0	${countHotels}
	\	${row}=		convert to string	${singleHotel}
	\	${Checkdesti}=	replace string		${checkdesti}	ROW		${row}
 	\	element should contain		${Checkdesti}		${FiltersList[${filter}-1]}
	\	${singleHotel}=	evaluate	${singleHotel}+1
	\	${checkdesti}=	replace string		${checkdesti}	${row}		ROW
	click element	${appliedFilter}		

select MySafety from popular filter and check hotels for ${destination}
	checkbox should be selected		${MySafety}
	click element	${MySafety}
	${countHotels}=		get element count	${hotelsLists}
	:FOR	${singleHotel}	IN RANGE	0	${countHotels}
	\	${row}=		convert to string	${singleHotel}
	\	${Checkdesti}=	replace string		${checkdesti}	ROW		${row}
 	\	element should contain		${MySafetyImage}	Mysafety
	\	${singleHotel}=	evaluate	${singleHotel}+1
	\	${checkdesti}=	replace string		${checkdesti}	${row}		ROW	


check hotels according to "Ficility filter" for destination 
	[Arguments]		${filter}		${FiltersList}		${Filter_Num}		${value}
	${countHotels}=		get element count	${hotelsLists}
	:FOR	${singleHotel}	IN RANGE	0	${countHotels}
	\	${row}=		convert to string	${singleHotel}
	\	${Checkdesti}=	replace string		${checkdesti}	ROW		${row}
 	\	element should contain		${Checkdesti}		${value}
	\	${singleHotel}=	evaluate	${singleHotel}+1
	\	${checkdesti}=	replace string		${checkdesti}	${row}		ROW
	click element	${appliedFilter}		


	
check hotels according to "User Rating filter" for destination	
	[Arguments]		${filter}		${FiltersList}		${Filter_Num}	${value1}
	${countHotels}=		get element count	${hotelsLists}
	:FOR	${singleHotel}	IN RANGE	0	${countHotels}	
	\	${row}=		convert to string	${singleHotel}
	\	${userRating}=	replace string		${userRating}	ROW		${row}	
	\	${value}=	get text	${userRating}
	\	should be true		${value}>=${FiltersList[${filter}-1]}	
	\	${singleHotel}=	evaluate	${singleHotel}+1
	\	${userRating}=	replace string		${userRating}	${row}		ROW
	click element	${appliedFilter}		






